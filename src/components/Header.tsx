'use client'

import Link from 'next/link'
import {
  Popover,
  PopoverButton,
  PopoverBackdrop,
  PopoverPanel,
} from '@headlessui/react'
import clsx from 'clsx'

import { Button } from '@/components/Button'
import { Container } from '@/components/Container'
import { Logo } from '@/components/Logo'
import { NavLink } from '@/components/NavLink'

function MobileNavLink({
  href,
  children,
}: {
  href: string
  children: React.ReactNode
}) {
  return (
    <PopoverButton as={Link} href={href} className="block w-full p-2">
      {children}
    </PopoverButton>
  )
}

function MobileNavIcon({ open }: { open: boolean }) {
  return (
    <svg
      width="1717"
      height="375"
      viewBox="0 0 1717 375"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M134.553 255.602H10.8102C4.83988 255.602 0 260.406 0 266.332V337.269C0 343.195 4.83988 348 10.8102 348H134.553C140.523 348 145.363 343.195 145.363 337.269V266.332C145.363 260.406 140.523 255.602 134.553 255.602Z"
        fill="#2456E2"
      />
      <path
        d="M187.725 141.494H12.9686C5.96804 141.494 0.292969 147.128 0.292969 154.077V221.31C0.292969 228.259 5.96804 233.892 12.9686 233.892H187.725C194.726 233.892 200.401 228.259 200.401 221.31V154.077C200.401 147.128 194.726 141.494 187.725 141.494Z"
        fill="#2456E2"
      />
      <path
        d="M241.65 27H14.3498C6.42461 27 0 33.3774 0 41.2443V105.154C0 113.021 6.42461 119.398 14.3498 119.398H241.65C249.575 119.398 256 113.021 256 105.154V41.2443C256 33.3774 249.575 27 241.65 27Z"
        fill="#2456E2"
      />
      <path
        d="M335.4 300V90H367.8V300H335.4ZM349.8 210.6V179.4H458.1V210.6H349.8ZM349.8 121.2V90H471.6V121.2H349.8ZM574.474 303C559.074 303 545.274 299.5 533.074 292.5C521.074 285.3 511.574 275.6 504.574 263.4C497.574 251 494.074 236.9 494.074 221.1C494.074 205.3 497.574 191.3 504.574 179.1C511.574 166.7 521.074 157 533.074 150C545.274 142.8 559.074 139.2 574.474 139.2C589.674 139.2 603.274 142.8 615.274 150C627.474 157 637.074 166.7 644.074 179.1C651.074 191.3 654.574 205.3 654.574 221.1C654.574 236.9 651.074 251 644.074 263.4C637.074 275.6 627.474 285.3 615.274 292.5C603.274 299.5 589.674 303 574.474 303ZM574.474 274.8C583.874 274.8 592.274 272.5 599.674 267.9C607.074 263.1 612.874 256.7 617.074 248.7C621.274 240.5 623.274 231.3 623.074 221.1C623.274 210.7 621.274 201.5 617.074 193.5C612.874 185.3 607.074 178.9 599.674 174.3C592.274 169.7 583.874 167.4 574.474 167.4C565.074 167.4 556.574 169.8 548.974 174.6C541.574 179.2 535.774 185.6 531.574 193.8C527.374 201.8 525.374 210.9 525.574 221.1C525.374 231.3 527.374 240.5 531.574 248.7C535.774 256.7 541.574 263.1 548.974 267.9C556.574 272.5 565.074 274.8 574.474 274.8ZM688.245 300V142.5H719.445V192L716.445 180C718.645 172.4 722.345 165.5 727.545 159.3C732.945 153.1 739.045 148.2 745.845 144.6C752.845 141 760.045 139.2 767.445 139.2C770.845 139.2 774.045 139.5 777.045 140.1C780.245 140.7 782.745 141.4 784.545 142.2L776.445 175.8C774.045 174.8 771.345 174 768.345 173.4C765.545 172.6 762.745 172.2 759.945 172.2C754.545 172.2 749.345 173.3 744.345 175.5C739.545 177.5 735.245 180.4 731.445 184.2C727.845 187.8 724.945 192.1 722.745 197.1C720.545 201.9 719.445 207.2 719.445 213V300H688.245ZM808.641 300V142.5H839.841V176.1L834.141 179.7C835.741 174.5 838.241 169.5 841.641 164.7C845.241 159.9 849.541 155.7 854.541 152.1C859.741 148.3 865.241 145.3 871.041 143.1C877.041 140.9 883.141 139.8 889.341 139.8C898.341 139.8 906.241 141.3 913.041 144.3C919.841 147.3 925.441 151.8 929.841 157.8C934.241 163.8 937.441 171.3 939.441 180.3L934.641 179.1L936.741 174C938.941 169.4 941.941 165.1 945.741 161.1C949.741 156.9 954.241 153.2 959.241 150C964.241 146.8 969.541 144.3 975.141 142.5C980.741 140.7 986.241 139.8 991.641 139.8C1003.44 139.8 1013.14 142.2 1020.74 147C1028.54 151.8 1034.34 159.1 1038.14 168.9C1042.14 178.7 1044.14 190.9 1044.14 205.5V300H1012.94V207.3C1012.94 198.3 1011.74 191 1009.34 185.4C1007.14 179.6 1003.74 175.3 999.141 172.5C994.541 169.7 988.641 168.3 981.441 168.3C975.841 168.3 970.541 169.3 965.541 171.3C960.741 173.1 956.541 175.7 952.941 179.1C949.341 182.5 946.541 186.5 944.541 191.1C942.541 195.5 941.541 200.4 941.541 205.8V300H910.341V206.7C910.341 198.5 909.141 191.6 906.741 186C904.341 180.2 900.841 175.8 896.241 172.8C891.641 169.8 886.041 168.3 879.441 168.3C873.841 168.3 868.641 169.3 863.841 171.3C859.041 173.1 854.841 175.7 851.241 179.1C847.641 182.3 844.841 186.2 842.841 190.8C840.841 195.2 839.841 200 839.841 205.2V300H808.641Z"
        fill="#10182A"
      />
      <path
        d="M1122.71 300L1069.61 141.9L1107.41 141.6L1142.81 254.4L1136.21 253.8L1174.61 165.6H1196.81L1236.11 253.8L1228.31 254.7L1264.01 141.9H1301.81L1248.41 300H1222.01L1181.51 205.2L1187.21 205.8L1148.81 300H1122.71ZM1333.17 300V141.9H1370.07V300H1333.17ZM1351.17 108.3C1343.77 108.3 1337.97 106.5 1333.77 102.9C1329.77 99.1 1327.77 93.8 1327.77 87C1327.77 80.6 1329.87 75.4 1334.07 71.4C1338.27 67.4 1343.97 65.4 1351.17 65.4C1358.77 65.4 1364.57 67.3 1368.57 71.1C1372.77 74.7 1374.87 80 1374.87 87C1374.87 93.2 1372.77 98.3 1368.57 102.3C1364.37 106.3 1358.57 108.3 1351.17 108.3ZM1469.66 303C1455.66 303 1443.06 300.7 1431.86 296.1C1420.86 291.3 1411.86 284.5 1404.86 275.7L1428.86 255C1434.86 261.8 1441.56 266.7 1448.96 269.7C1456.36 272.7 1464.16 274.2 1472.36 274.2C1475.76 274.2 1478.76 273.8 1481.36 273C1484.16 272.2 1486.56 271 1488.56 269.4C1490.56 267.8 1492.06 266 1493.06 264C1494.26 261.8 1494.86 259.4 1494.86 256.8C1494.86 252 1493.06 248.2 1489.46 245.4C1487.46 244 1484.26 242.5 1479.86 240.9C1475.66 239.3 1470.16 237.7 1463.36 236.1C1452.56 233.3 1443.56 230.1 1436.36 226.5C1429.16 222.7 1423.56 218.5 1419.56 213.9C1416.16 210.1 1413.56 205.8 1411.76 201C1410.16 196.2 1409.36 191 1409.36 185.4C1409.36 178.4 1410.86 172.1 1413.86 166.5C1417.06 160.7 1421.36 155.7 1426.76 151.5C1432.16 147.3 1438.46 144.1 1445.66 141.9C1452.86 139.7 1460.36 138.6 1468.16 138.6C1476.16 138.6 1483.86 139.6 1491.26 141.6C1498.86 143.6 1505.86 146.5 1512.26 150.3C1518.86 153.9 1524.46 158.3 1529.06 163.5L1508.66 186C1504.86 182.4 1500.66 179.2 1496.06 176.4C1491.66 173.6 1487.16 171.4 1482.56 169.8C1477.96 168 1473.66 167.1 1469.66 167.1C1465.86 167.1 1462.46 167.5 1459.46 168.3C1456.46 168.9 1453.96 169.9 1451.96 171.3C1449.96 172.7 1448.36 174.5 1447.16 176.7C1446.16 178.7 1445.66 181.1 1445.66 183.9C1445.86 186.3 1446.46 188.6 1447.46 190.8C1448.66 192.8 1450.26 194.5 1452.26 195.9C1454.46 197.3 1457.76 198.9 1462.16 200.7C1466.56 202.5 1472.26 204.2 1479.26 205.8C1489.06 208.4 1497.26 211.3 1503.86 214.5C1510.46 217.7 1515.66 221.4 1519.46 225.6C1523.26 229.2 1525.96 233.4 1527.56 238.2C1529.16 243 1529.96 248.3 1529.96 254.1C1529.96 263.5 1527.26 271.9 1521.86 279.3C1516.66 286.7 1509.46 292.5 1500.26 296.7C1491.26 300.9 1481.06 303 1469.66 303ZM1636.56 303C1619.96 303 1605.26 299.5 1592.46 292.5C1579.86 285.5 1569.96 276 1562.76 264C1555.76 251.8 1552.26 237.9 1552.26 222.3C1552.26 209.9 1554.26 198.6 1558.26 188.4C1562.26 178.2 1567.76 169.4 1574.76 162C1581.96 154.4 1590.46 148.6 1600.26 144.6C1610.26 140.4 1621.16 138.3 1632.96 138.3C1643.36 138.3 1653.06 140.3 1662.06 144.3C1671.06 148.3 1678.86 153.8 1685.46 160.8C1692.06 167.6 1697.06 175.8 1700.46 185.4C1704.06 194.8 1705.76 205.1 1705.56 216.3L1705.26 229.2H1577.16L1570.26 204H1674.36L1669.56 209.1V202.5C1668.96 196.3 1666.96 190.9 1663.56 186.3C1660.16 181.5 1655.76 177.8 1650.36 175.2C1645.16 172.4 1639.36 171 1632.96 171C1623.16 171 1614.86 172.9 1608.06 176.7C1601.46 180.5 1596.46 186 1593.06 193.2C1589.66 200.2 1587.96 209 1587.96 219.6C1587.96 229.8 1590.06 238.7 1594.26 246.3C1598.66 253.9 1604.76 259.8 1612.56 264C1620.56 268 1629.86 270 1640.46 270C1647.86 270 1654.66 268.8 1660.86 266.4C1667.06 264 1673.76 259.7 1680.96 253.5L1699.26 279C1693.86 284 1687.66 288.3 1680.66 291.9C1673.86 295.3 1666.66 298 1659.06 300C1651.46 302 1643.96 303 1636.56 303Z"
        fill="#2456E2"
      />
    </svg>
  )
}

function MobileNavigation() {
  return (
    <Popover>
      <PopoverButton
        className="relative z-10 flex h-8 w-8 items-center justify-center focus:not-data-focus:outline-hidden"
        aria-label="Toggle Navigation"
      >
        {({ open }) => <MobileNavIcon open={open} />}
      </PopoverButton>
      <PopoverBackdrop
        transition
        className="fixed inset-0 bg-slate-300/50 duration-150 data-closed:opacity-0 data-enter:ease-out data-leave:ease-in"
      />
      <PopoverPanel
        transition
        className="absolute inset-x-0 top-full mt-4 flex origin-top flex-col rounded-2xl bg-white p-4 text-lg tracking-tight text-slate-900 shadow-xl ring-1 ring-slate-900/5 data-closed:scale-95 data-closed:opacity-0 data-enter:duration-150 data-enter:ease-out data-leave:duration-100 data-leave:ease-in"
      >
        <MobileNavLink href="#features">Fonctionnalités</MobileNavLink>
        <MobileNavLink href="/contact">Contactez-nous</MobileNavLink>
        {/* <MobileNavLink href="#testimonials">Témoignages</MobileNavLink>
        <MobileNavLink href="#pricing">Tarification</MobileNavLink> */}
        <hr className="m-2 border-slate-300/40" />
        <MobileNavLink href="/login">Se connecter</MobileNavLink>
      </PopoverPanel>
    </Popover>
  )
}

export function Header() {
  return (
    <header className="py-10">
      <Container>
        <nav className="relative z-50 flex justify-between">
          <div className="flex items-center md:gap-x-12">
            <Link href="/" aria-label="Home">
              <Logo className="h-10 w-auto" />
            </Link>
            <div className="hidden md:flex md:gap-x-6">
              <NavLink href="#features">Fonctionnalités</NavLink>
              <NavLink href="#secondary-features">Savoir plus</NavLink>
              <NavLink href="/contact">Contactez-nous</NavLink>
            </div>
          </div>
          <div className="flex items-center gap-x-5 md:gap-x-8">
            <div className="hidden md:block">
              <NavLink
                href="https://form-wise.vercel.app/login"
                target="_blank"
              >
                Se connecter
              </NavLink>
            </div>
            <div className="hidden md:block">
              {' '}
              <Button
                href="https://calendly.com/hello1367studio/30min"
                color="blue"
              >
                <span className="lg:inline">
                  Commencez dès <span>aujourd&apos;hui</span>
                </span>
              </Button>
            </div>

            <div className="-mr-1 md:hidden">
              <MobileNavigation />
            </div>
          </div>
        </nav>
      </Container>
    </header>
  )
}
